@page "/"

@inject IDialogService DialogService

<PageTitle>Home</PageTitle>

<h1>Welcome to Blazor WinOld</h1>

<p style="margin-bottom: 20px;">
	A Blazor UI component library that brings back the nostalgic look and feel of classic Windows operating systems. 
	Explore interactive components styled after Windows 98, XP, and 7. Switch between styles using the selector below 
	to see how each component adapts to different Windows themes.
</p>

<div class="desktop" style="background-color: @GetDesktopColor();">
	<WinOldCheckBox Appearance="appearance"
					Label="Disable this frame :"
					CheckedChanged="@disabledComponents" />

	<WinOldSelect Appearance="appearance"
				  @bind-Value="appearance"
				  T="Appearance"
				  Disabled="_disabledComponents">
		<WinOldOption Value="Appearance.WinXP">Win XP style</WinOldOption>
		<WinOldOption Value="Appearance.Win98">Win 98 style</WinOldOption>
		<WinOldOption Value="Appearance.Win7">Win 7 style</WinOldOption>
	</WinOldSelect>

</div>


<WinOldFrame Appearance="appearance"
			 Label="Frame"
			 Disabled="_disabledComponents">
	<WinOldTextBox Appearance="appearance"
				   Label="Textbox :"
				   @bind-Value="SelectRadioString" />

	<WinOldLabel Appearance="appearance">
		Label : @SelectedRadio.ToString()
	</WinOldLabel>

	<WinOldButton OnClick="ClickMe"
				  Appearance="appearance">Click me</WinOldButton>

	<WinOldOptionButtonGroup T="int"
							 @bind-Value="SelectedRadio"
							 Appearance="appearance">
		<WinOldOptionButton Label="Adrien" Value="1" />
		<WinOldOptionButton Label="Christophe" Value="2" />
		<WinOldOptionButton Label="Denis" Value="3" />
	</WinOldOptionButtonGroup>
</WinOldFrame>


<WinOldTabs Appearance="appearance"
			Style="max-width: 500px">
	<WinOldTabPanel Label="Tab A">
		<p>Contents of first tab</p>
	</WinOldTabPanel>

	<WinOldTabPanel Label="Tab B">
		<p>Contents of second tab</p>
	</WinOldTabPanel>

	<WinOldTabPanel Label="MessageBox" IsDefault="true">
		<div style="display:flex;gap: 10px;">
			<WinOldFrame Appearance="appearance"
						 Label="Icon"
						 Disabled="_disabledComponents"
						 Style="flex: 1;">

				<WinOldOptionButtonGroup T="Icon"
										 @bind-Value="iconMessage"
										 Appearance="appearance">
					<WinOldOptionButton Label="None" Value="Icon.None" />
					<WinOldOptionButton Label="Alert" Value="Icon.Alert" />
					<WinOldOptionButton Label="Critical" Value="Icon.Critical" />
					<WinOldOptionButton Label="Information" Value="Icon.Information" />
					<WinOldOptionButton Label="Question" Value="Icon.Question" />
				</WinOldOptionButtonGroup>

			</WinOldFrame>

			<WinOldFrame Appearance="appearance"
						 Label="Buttons"
						 Disabled="_disabledComponents"
						 Style="flex: 1;">

				<WinOldTextBox Appearance="appearance"
							   Label="Message title :"
							   @bind-Value="MessageTitle" />
				<br />
				<WinOldTextBox Appearance="appearance"
							   Label="Name of OK Button :"
							   @bind-Value="ButtonNameOK" />
				<br />
				<WinOldTextBox Appearance="appearance"
							   Label="Name of Cancel Button :"
							   @bind-Value="ButtonNameCancel" />
			</WinOldFrame>
		</div>

		<div style="margin-top:6px;display: flex;justify-content: center;">
			<WinOldButton OnClick="ClickMe"
						  Appearance="appearance">Show MessageBox</WinOldButton>
		</div>
	</WinOldTabPanel>

</WinOldTabs>



@code {
	private bool _disabledComponents;

	private string? _selectedValue = "dog";

	private int SelectedRadio { get; set; } = 2;
	private string SelectRadioString { get; set; } = "Christophe";
	private int SelectedOption { get; set; } = 2;

	private Appearance appearance { get; set; } = Appearance.WinXP;
	private Icon iconMessage { get; set; } = Icon.Information;
	 
	private string MessageTitle { get; set; } = "Title";
	private string ButtonNameOK { get; set; } = "OK";
	private string ButtonNameCancel { get; set; } = "";

	async Task ClickMe()
	{
		Console.WriteLine("Clicked!");

		var options = new MessageBoxOptions
		{
			Appearance = appearance,
			Title = MessageTitle,
			Message = "Blazor is awesome!",
			Icon = iconMessage,
			OkButtonText = ButtonNameOK,
			CancelButtonText = ButtonNameCancel
		};
		var DialogResult = await DialogService.ShowMessageBox(options);
	}

	private void disabledComponents(bool value) => _disabledComponents = !_disabledComponents;

	private string GetDesktopColor()
	{
		SystemColors.Appearance = appearance;
		var color = SystemColors.Desktop;
		return $"rgb({color.R}, {color.G}, {color.B})";
	}
}
